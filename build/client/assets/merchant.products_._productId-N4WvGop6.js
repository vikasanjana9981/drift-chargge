import{j as e,r as g}from"./index-DngLVFUg.js";import{r as V}from"./routes-C5ziuI-K.js";import{D as ce,c as de,S as me,v as xe,u as ue,C as pe,a as fe,P as he}from"./sortable.esm-BLq9_7uD.js";import{m as B}from"./messages-BV2XNudo.js";import{d as a}from"./index-CZBhWrIY.js";import{c as T,e as ge,f as Z,g as G,h as je}from"./index-hoEkgPmj.js";import{V as Ne}from"./VariantDetailColumns-BVbtcIaz.js";import{a as ve}from"./index-B2HYwkQ5.js";import{L as I,q as S,p as $,r as Pe,u as Ce}from"./components-DCDtNDXQ.js";import{f as be,e as C,a as F,u as ye}from"./shopifyIdUtils-PhKRAdsZ.js";import{g as A,p as we,a as _}from"./sellingPlansGroupUtils-DNlCIa3o.js";import{b as Se,s as J,c as De,d as z,e as K,f as W,g as H,h as Te,i as Ie,j as Me,k as X,l as Oe,m as ke}from"./shopAtom-DHlAgFdS.js";import{C as q,p as M}from"./ConfirmationModal-2v7BHoQs.js";import{c as Q,d as Ee,O as Y}from"./plansAtom-BDG5N9ri.js";import{u as b,k as N}from"./index-xIj4AxVg.js";import{C as Le}from"./check-circle-hkLajME9.js";import"./modal-bge_ITEm.js";import"./SellingPlanFormUtils-D_WkLg4x.js";import"./datepicker-Bhj_Xp2q.js";function R({label:s,options:t,onSelect:n,renderOption:l,variant:u="outline",menuClassName:r}){return e.jsxs(a.Dropdown,{children:[e.jsx(a.Dropdown.Trigger,{children:e.jsx(a.Button,{as:"span",variant:u,children:s})}),e.jsx(a.Dropdown.Menu,{className:r,children:t.map(o=>e.jsx(a.Dropdown.Item,{onClick:()=>n(o.value),children:l?l(o.value):o.label},String(o.value)))})]})}var ee=(s=>(s.MANAGE_PLANS="manage_plans",s.MANAGE_VARIANTS_PLANS="manage_variants_plans",s))(ee||{});const Ae={manage_plans:"Manage Plans",manage_variants_plans:"Manage Variants Plans"},se=Object.values(ee).map(s=>({value:s,label:Ae[s]}));function Fe({productResponse:s}){return e.jsxs("div",{className:"mb-6 flex w-full cursor-pointer flex-col gap-y-4 rounded-[10px] border border-muted p-4 lg:gap-y-6 sm:p-[30px]",children:[e.jsx(Ge,{productResponse:s}),e.jsx("hr",{}),e.jsx(Be,{productResponse:s})]})}const Be=({productResponse:s})=>{var u,r,o;const{title:t,descriptionHtml:n,variants:{nodes:l}}=s;return e.jsxs(a.Flex,{direction:"col",children:[e.jsxs(a.Box,{className:"flex gap-4",children:[e.jsx("img",{src:((o=(r=(u=s.featuredMedia)==null?void 0:u.preview)==null?void 0:r.image)==null?void 0:o.url)||"",alt:t}),e.jsx(a.Box,{children:e.jsxs(I,{to:`/merchant/products/${s.id}`,children:[e.jsx(a.Title,{as:"h3",className:"text-base font-medium xl:text-lg",children:t}),e.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:n}})]})})]}),l.length&&e.jsx(ze,{productResponse:s})]})},Ge=({productResponse:s})=>e.jsx(a.Flex,{justify:"between",align:"center",direction:"col",children:e.jsxs("div",{className:"w-full flex",children:[e.jsxs(a.Flex,{align:"center",children:[e.jsx("span",{className:T("me-2 inline-flex size-5 items-center justify-center rounded-md [&>svg]:size-5","text-gray-800 dark:text-gray-500 dark:group-hover:text-gray-700"),children:e.jsx(ge,{})}),e.jsx(a.Title,{as:"h3",className:"text-base font-medium xl:text-lg",children:B.products.productDetails.title})]}),e.jsx(R,{label:"Configure",options:se,onSelect:$e,renderOption:_e,variant:"solid",menuClassName:"min-w-max whitespace-nowrap"})]})}),$e=s=>{console.log("Selected:",s)};function _e(s){var t;return e.jsxs("div",{className:"flex items-center",children:[s==="manage_plans"?e.jsx(Z,{}):e.jsx(G,{}),e.jsx("span",{className:"ml-2",children:(t=se.find(n=>n.value===s))==null?void 0:t.label})]})}const ze=({productResponse:s})=>{const{variants:{nodes:t}}=s;return e.jsxs(a.Accordion,{className:"border-b last-of-type:border-b-0",children:[e.jsx(a.Accordion.Header,{className:"items-start",children:({open:n})=>e.jsxs("div",{className:"flex cursor-pointer items-center pb-3 text-md font-semibold",children:["Variants",e.jsx(ve,{className:T("h-4 w-4 -rotate-90 transform transition-transform duration-300 ms-2",n&&"-rotate-0")})]})}),e.jsx(a.Accordion.Body,{className:"mb-7",children:t.map(n=>e.jsx("div",{children:e.jsx(Ne,{variant:n})},n.id))})]})},ae=({planName:s,children:t,className:n})=>e.jsxs("div",{className:T("flex gap-2",n),children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Se,{className:"text-green-600 text-xl"}),e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:s||"Unnamed Plan"})]}),t]}),He=({pricingPolicyAdjustmentValue:s,pricingPolicyAdjustmentType:t})=>{const[n]=b(J),{currencyFormats:{moneyWithCurrencyFormat:l}}=n,u=g.useMemo(()=>t==="FIXED_AMOUNT"||t==="PRICE"?be(s,l):null,[s,t,l]);return e.jsx("div",{className:"flex justify-between items-center text-sm text-gray-700",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{children:[e.jsx(De,{className:"inline-block text-blue-500 mr-1"}),e.jsx("strong",{children:"Plan Type:"})," One-time Purchase"]}),t==="PERCENTAGE"&&e.jsxs("p",{className:"text-green-600 font-medium",children:[e.jsx(z,{className:"inline-block text-yellow-500 mr-1"}),e.jsx("strong",{children:"Discount:"})," ",s,"%"]}),u&&e.jsxs("p",{className:"text-green-600 font-medium",children:[e.jsx(z,{className:"inline-block text-yellow-500 mr-1"}),e.jsx("strong",{children:t==="FIXED_AMOUNT"||t==="PERCENTAGE"?"Discount:":"Price:"})," ",u]})]})})},Ue=({OneTimeGroup:s})=>{const[t,n]=g.useState(!1),[l,u]=g.useState(!1),[r,o]=g.useState(!1),x=S(),c=()=>{n(!0)},f=()=>{o(!0);const{sellingPlanId:p,groupId:d}=s;if(!d||!p){N.error("Somethink wrong Please try again "),o(!1);return}const i=new FormData;i.append("sellingPlanId",p),i.append("groupId",d),i.append("action","deleteOneTimePlan"),x.submit(i,{method:"POST",action:".",encType:"multipart/form-data"})};return g.useEffect(()=>{var p,d;x.state==="idle"&&x.data&&((p=x==null?void 0:x.data)!=null&&p.success?N.success("Changes saved successfully!"):N.error((d=x==null?void 0:x.data)==null?void 0:d.error),o(!1))},[x.state,x.data]),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsxs(a.Button,{variant:"outline",size:"sm",onClick:c,children:[e.jsx(Le,{className:"mr-1 text-blue-500"})," Edit"]}),e.jsxs(a.Button,{variant:"outline",size:"sm",color:"danger",onClick:()=>u(!0),isLoading:r,loader:e.jsx(a.Loader,{variant:"spinner"}),children:[e.jsx(K,{className:"mr-1 text-red-500"})," Delete"]}),e.jsx(Ve,{modalState:t,setModalState:n}),e.jsx(q,{isOpen:l,title:"Delete Onetime",message:"Are you sure you want to delete Onetime Plan?",onConfirm:f,onCancel:()=>u(!1)})]})},Ve=({modalState:s,setModalState:t})=>{const[n]=b(M),[l,u]=b(Q),r=S(),[o,x]=g.useState(!1),[c,f]=g.useState(Ee);g.useEffect(()=>{s&&(l!=null&&l.oneTimeGroup)&&f(l.oneTimeGroup)},[s]);const p=(i,m)=>{f(h=>({...h,[i]:m})),u(h=>({...h,oneTimeGroup:{...h.oneTimeGroup,[i]:m}}))},d=async()=>{x(!0);const{groupId:i}=c;if(!i){N.error("Please select a group."),x(!1);return}const m=new FormData;m.append("plans",JSON.stringify(c)),m.append("groupId",i),m.append("action","updateOneTimePlan"),r.submit(m,{method:"POST",action:".",encType:"multipart/form-data"})};return g.useEffect(()=>{var i,m;r.state==="idle"&&r.data&&((i=r==null?void 0:r.data)!=null&&i.success?N.success("Changes saved successfully!"):N.error((m=r==null?void 0:r.data)==null?void 0:m.error),x(!1),t(!1))},[r.state,r.data]),e.jsx(a.Modal,{isOpen:s,onClose:()=>t(!1),overlayClassName:"backdrop-blur",containerClassName:"!w-[90%] sm:!w-[600px] !max-w-4xl !shadow-2xl",children:e.jsxs("div",{className:"m-auto px-7 pt-6 pb-8",children:[e.jsxs("div",{className:"mb-7 flex items-center justify-between",children:[e.jsx(a.Title,{as:"h3",children:"Edit Plan"}),e.jsx(a.ActionIcon,{size:"sm",variant:"text",onClick:()=>t(!1),children:e.jsx(W,{className:"h-auto w-6",strokeWidth:1.8})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Y,{currentPlan:c,onChange:p,onSave:d,productTitle:(n==null?void 0:n.title)||"",tabListClassName:"w-[35%]",tabPanelClassName:"w-[79%]",saveButtonProps:{isLoading:o,loader:e.jsx(a.Loader,{variant:"spinner"})}})})]})})},Ze=({OneTimeGroup:s})=>{const{planName:t,pricingPolicyAdjustmentValue:n,pricingPolicyAdjustmentType:l}=s;return e.jsxs("div",{className:"flex w-full cursor-pointer flex-col gap-y-4 rounded-[10px] border border-muted p-4 lg:gap-y-2 sm:p-[30px]",children:[e.jsx(ae,{planName:t}),e.jsx(He,{pricingPolicyAdjustmentValue:n,pricingPolicyAdjustmentType:l}),e.jsx(Ue,{OneTimeGroup:s})]})};var O=(s=>(s.MANAGE_PLANS="manage_plans",s))(O||{});const te={manage_plans:"Manage Plans"},ne=Object.values(O).map(s=>({value:s,label:te[s]})),U=({shipmentGroup:s,plansKey:t,setRefreshKey:n})=>{if(!s)return null;const{groupName:l,sellingPlans:u,id:r}=s,o=C(r),x=[...u].sort((j,v)=>j.position-v.position),[c,f]=g.useState(x),[p,d]=g.useState(!1),[i,m]=g.useState(!1),h=S(),[P,D]=b(M),y=$(),{productId:w}=Pe(),k=j=>{const{active:v,over:E}=j;if(!E||v.id===E.id)return;const ie=c.findIndex(({id:L})=>L===v.id),oe=c.findIndex(({id:L})=>L===E.id);f(fe(c,ie,oe)),d(!0)},le=()=>{const j=C(P.id);m(!0);const v=new FormData;v.append("plans",JSON.stringify(c)),v.append("groupId",r),v.append("action","updatePlanOrder"),h.submit(v,{method:"POST",action:`/merchant/products/${j}`,encType:"multipart/form-data"})},re=()=>{const j=C(P.id);y(`/merchant/products/${j}/plans?plansUpdate=yes`)};return g.useEffect(()=>{var j,v;h.state==="idle"&&h.data&&((j=h==null?void 0:h.data)!=null&&j.success?(N.success("Changes saved successfully!"),d(!1)):N.error((v=h==null?void 0:h.data)==null?void 0:v.error),m(!1))},[h.state,h.data]),e.jsxs("div",{className:"flex w-full cursor-pointer flex-col gap-y-6 rounded-[10px] border border-muted p-4 lg:gap-y-2 sm:p-[30px]",children:[e.jsx(ae,{className:"mb-4 flex-col",planName:l,children:e.jsx(a.Text,{children:B.products.subscriptionPlanDnD})}),e.jsx(ce,{collisionDetection:de,onDragEnd:k,children:e.jsx(me,{items:c.map(({id:j})=>j),strategy:xe,children:c.map(j=>e.jsx(Je,{id:j.id,plan:j,shipmentGroup:s,setRefreshKey:n},j.id))})}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(a.Button,{variant:"text",onClick:re,children:[e.jsx(H,{className:"text-primary"}),e.jsx(a.Text,{className:"ms-2 text-primary font-semibold",children:"Manage plans"})]}),e.jsxs(I,{className:"flex items-center",to:`/merchant/products/${w}/variant-plans?groupId=${o}`,children:[e.jsx(H,{className:"text-primary"}),e.jsx(a.Text,{className:"ms-2 text-primary font-semibold",children:"Manage variant plans"})]})]}),p&&e.jsx(a.Button,{onClick:le,className:"px-4 py-2 rounded-md text-white bg-blue-500 hover:bg-blue-600",isLoading:i,loader:e.jsx(a.Loader,{variant:"spinner"}),children:"Save Changes"})]})]})},Je=({id:s,plan:t,shipmentGroup:n,setRefreshKey:l})=>{const{attributes:u,listeners:r,setNodeRef:o,transform:x,transition:c}=ue({id:s}),f={transform:pe.Transform.toString(x),transition:c,backgroundColor:"#EDEEF9"};return e.jsx("div",{className:"p-4 rounded-lg mt-2",ref:o,style:f,...u,...r,children:e.jsx(Ke,{sellingPlan:t,shipmentGroup:n,setRefreshKey:l})})},Ke=({sellingPlan:s,shipmentGroup:t,setRefreshKey:n})=>{var d,i,m;const l=s.planName||"Unnamed Plan",u=((d=s.category)==null?void 0:d.charAt(0).toUpperCase())+((i=s.category)==null?void 0:i.slice(1).toLowerCase())||"Subscription",r=s.deliveryRecurringPolicyInterval||"MONTH",o=s.deliveryRecurringPolicyIntervalCount||1,x=`Ships every ${o} ${r.toLowerCase()}${o>1?"s":""}.`,c=s.pricingPolicyAdjustmentValue||0,f=((m=s.pricingPolicyAdjustmentType)==null?void 0:m.toLowerCase())||"fixed amount",p=`${c}% ${f}`;return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(a.Flex,{align:"center",direction:"row",gap:"2",justify:"between",children:[e.jsxs(a.Box,{className:"flex gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 25 25",fill:"none",children:e.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.5 8C10.3284 8 11 7.32843 11 6.5C11 5.67157 10.3284 5 9.5 5C8.67157 5 8 5.67157 8 6.5C8 7.32843 8.67157 8 9.5 8ZM9.5 14C10.3284 14 11 13.3284 11 12.5C11 11.6716 10.3284 11 9.5 11C8.67157 11 8 11.6716 8 12.5C8 13.3284 8.67157 14 9.5 14ZM11 18.5C11 19.3284 10.3284 20 9.5 20C8.67157 20 8 19.3284 8 18.5C8 17.6716 8.67157 17 9.5 17C10.3284 17 11 17.6716 11 18.5ZM15.5 8C16.3284 8 17 7.32843 17 6.5C17 5.67157 16.3284 5 15.5 5C14.6716 5 14 5.67157 14 6.5C14 7.32843 14.6716 8 15.5 8ZM17 12.5C17 13.3284 16.3284 14 15.5 14C14.6716 14 14 13.3284 14 12.5C14 11.6716 14.6716 11 15.5 11C16.3284 11 17 11.6716 17 12.5ZM15.5 20C16.3284 20 17 19.3284 17 18.5C17 17.6716 16.3284 17 15.5 17C14.6716 17 14 17.6716 14 18.5C14 19.3284 14.6716 20 15.5 20Z",fill:"#121923"})}),e.jsx(a.Title,{className:"text-lg font-semibold",children:l})]}),e.jsx(We,{sellingPlan:s,shipmentGroup:t,setRefreshKey:n})]}),e.jsxs(a.Box,{className:"ms-8 mt-3",children:[e.jsxs(a.Text,{className:"text-gray-600",children:[e.jsx(Te,{className:"inline-block mr-1"}),u]}),e.jsxs(a.Text,{className:"text-blue-600",children:[e.jsx(Ie,{className:"inline-block mr-1"}),x]}),e.jsxs(a.Text,{className:"text-green-600",children:[e.jsx(Me,{className:"inline-block mr-1"}),p]})]})]})},We=({sellingPlan:s,shipmentGroup:t,setRefreshKey:n})=>{const[l,u]=g.useState(!1);return e.jsxs(a.Box,{className:"flex items-center",children:[e.jsx(a.ActionIcon,{variant:"text",onPointerDown:r=>r.stopPropagation(),onClick:r=>{r.stopPropagation(),u(!0)},children:e.jsx(X,{className:"mr-2 h-4 w-4"})}),e.jsx(qe,{sellingPlan:s,shipmentGroup:t,setRefreshKey:n}),e.jsx(Xe,{modalState:l,setModalState:u,sellingPlan:s,shipmentGroup:t,setRefreshKey:n})]})},Xe=({modalState:s,setModalState:t,sellingPlan:n,shipmentGroup:l,setRefreshKey:u})=>{const[r,o]=g.useState(n),[x,c]=g.useState(!1),f=S(),p=(i,m)=>{o(h=>({...h,[i]:m}))},d=async()=>{c(!0),console.log("shipmentGroup",l);const i=new FormData;i.append("plans",JSON.stringify(r)),i.append("groupId",l.id),i.append("action","updatePayPerShipmentPlan"),f.submit(i,{method:"POST",action:".",encType:"multipart/form-data"})};return g.useEffect(()=>{var i,m;f.state==="idle"&&f.data&&((i=f==null?void 0:f.data)!=null&&i.success?(N.success("Changes saved successfully!"),u(h=>h+1)):N.error((m=f==null?void 0:f.data)==null?void 0:m.error),c(!1),t(!1))},[f.state,f.data]),e.jsx(a.Modal,{isOpen:s,onClose:()=>t(!1),overlayClassName:"backdrop-blur",containerClassName:"!w-[90%] sm:!w-[600px] !max-w-4xl !shadow-2xl",children:e.jsxs("div",{className:"m-auto px-7 pt-6 pb-8",children:[e.jsxs("div",{className:"mb-7 flex items-center justify-between",children:[e.jsx(a.Title,{as:"h3",children:"Edit Plan"}),e.jsx(a.ActionIcon,{size:"sm",variant:"text",onClick:()=>t(!1),onPointerDown:i=>i.stopPropagation(),children:e.jsx(W,{className:"h-auto w-6",strokeWidth:1.8})})]}),e.jsx("div",{className:"w-full",children:e.jsx(Y,{currentPlan:r,onChange:p,onSave:d,productTitle:"",tabListClassName:"w-[35%]",tabPanelClassName:"w-[79%]",saveButtonProps:{isLoading:x,loader:e.jsx(a.Loader,{variant:"spinner"})}})})]})})},qe=({sellingPlan:s,shipmentGroup:t,setRefreshKey:n})=>{const l=S(),[u,r]=g.useState(!1),[o,x]=g.useState(!1),[c]=b(M),f=()=>{var y;r(!0);const{sellingPlanGroups:d}=c,i=t.id,m=s.id;if(!i||!m){N.error("Required data missing"),r(!1);return}const h=((y=d.edges.find(w=>w.node.id===i))==null?void 0:y.node)||null;if(!h){N.error("Selling plan group not found"),r(!1);return}const P=new FormData;P.append("sellingPlanId",m),P.append("groupId",i);const D=p(h)?"deletePayPerShipmentPlanGroup":"deletePayPerShipmentPlan";P.append("action",D),l.submit(P,{method:"POST",action:".",encType:"multipart/form-data"})},p=d=>d.sellingPlans.edges.length===1;return g.useEffect(()=>{var d,i;l.state==="idle"&&l.data&&((d=l==null?void 0:l.data)!=null&&d.success?(N.success("Changes saved successfully!"),n(m=>m+1)):N.error((i=l==null?void 0:l.data)==null?void 0:i.error),r(!1))},[l.state,l.data]),e.jsxs(a.Dropdown,{placement:"bottom-end",className:"min-w-250",children:[e.jsx(a.Dropdown.Trigger,{className:"flex items-center",onPointerDown:d=>d.stopPropagation(),onClick:d=>d.stopPropagation(),children:e.jsx(Oe,{className:"h-5 w-5"})}),e.jsx(a.Dropdown.Menu,{className:"divide-y min-w-[210px]",children:e.jsxs("div",{className:"mb-2",children:[e.jsx(a.Dropdown.Item,{children:e.jsxs(a.Button,{className:"px-0 py-2",variant:"text",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Edit Plan"]})}),e.jsxs(a.Dropdown.Item,{children:[e.jsxs(a.Button,{isLoading:u,loader:e.jsx(a.Loader,{variant:"spinner"}),className:"px-0 py-2",variant:"text",onPointerDown:d=>d.stopPropagation(),onClick:d=>{d.stopPropagation(),x(!0)},children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Delete"]}),e.jsx(q,{isOpen:o,title:"Delete Plan",message:"Are you sure you want to delete Plan?",onConfirm:f,onCancel:()=>x(!1)})]}),e.jsx(a.Dropdown.Item,{children:e.jsxs(a.Button,{className:"px-0 py-2",variant:"text",children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),"Checkout Link"]})}),e.jsx("hr",{className:"my-3"}),e.jsx(a.Dropdown.Item,{children:e.jsxs(a.Flex,{direction:"col",gap:"1",children:[e.jsx(a.Text,{className:"font-semibold text-[#848BD4] text-lg uppercase",children:"Created on"}),e.jsx(a.Text,{className:"text-left",children:F(s==null?void 0:s.createdAt)})]})})]})})]})},Qe=({productResponse:s})=>{const[t,n]=g.useState([]);$();const[l,u]=b(Q);g.useEffect(()=>{var y;if(!s)return;const{sellingPlanGroups:m,currentAppInstallation:h}=s,P=((y=h==null?void 0:h.app)==null?void 0:y.id)||"",D=C(P);if(m&&m.edges){const w=m.edges.filter(k=>C(k.node.appId)===D);n(w)}},[s]);const r=A(t,"Onetime Plan Group"),o=r?we(r):null,x=A(t,"PayPerShipment Plan Group"),c=x?_(x):null,f=A(t,"PrePaid Plan Group"),p=f?_(f):null,[d,i]=g.useState(0);return g.useEffect(()=>{const m={payPerShipmentGroup:{groupName:(c==null?void 0:c.groupName)||"",sellingPlansToUpdate:(c==null?void 0:c.sellingPlans)||[],groupId:c==null?void 0:c.id},oneTimeGroup:{groupName:(o==null?void 0:o.planName)||"",sellingPlansToCreate:[o],groupId:o==null?void 0:o.groupId},prePaidSubscriptionsGroup:{groupName:(p==null?void 0:p.groupName)||"PrePaid Subscription Plan Group",sellingPlansToUpdate:(p==null?void 0:p.sellingPlans)||[],groupId:p==null?void 0:p.id}};JSON.stringify(l)!==JSON.stringify(m)&&u(m)},[o,c,p]),e.jsx(a.Flex,{gap:"5",children:t.length>0?e.jsxs("div",{className:"w-full flex flex-col gap-5",children:[o&&e.jsx(Ze,{OneTimeGroup:o}),c&&e.jsx(U,{plansKey:`payper-${d}`,shipmentGroup:c,setRefreshKey:i}),p&&e.jsx(U,{shipmentGroup:p,plansKey:`prepaid-${d}`,setRefreshKey:i})]}):e.jsxs(a.Flex,{direction:"col",gap:"7",children:[e.jsx(a.Text,{className:"mt-2",children:"No selling plans found."}),e.jsxs(I,{to:`/merchant/products/${C(s==null?void 0:s.id)}/plans`,className:"rounded-md text-sm font-bold flex items-center text-primary",children:[e.jsx(G,{}),e.jsx(a.Text,{className:"ms-2",children:te.manage_plans})]})]})})},Ye=({productResponse:s})=>{const t=$();return e.jsxs(a.Flex,{justify:"between",align:"center",children:[e.jsxs(a.Flex,{align:"center",children:[e.jsx("span",{className:T("me-2 inline-flex size-5 items-center justify-center rounded-md [&>svg]:size-5","text-gray-800 dark:text-gray-500 dark:group-hover:text-gray-700"),children:e.jsx(je,{})}),e.jsx(a.Title,{as:"h3",className:"text-base font-medium xl:text-lg",children:B.products.subscriptionPlanTitle})]}),e.jsx(R,{label:"Configure",options:ne,onSelect:n=>{n===O.MANAGE_PLANS?t(`/merchant/products/${C(s==null?void 0:s.id)}/plans`):t(`/merchant/products/${C(s==null?void 0:s.id)}/variant-plans`)},renderOption:Re,variant:"solid",menuClassName:"min-w-max whitespace-nowrap"})]})};function Re(s){var t;return e.jsxs("div",{className:"flex items-center",children:[s===O.MANAGE_PLANS?e.jsx(Z,{}):e.jsx(G,{}),e.jsx("span",{className:"ml-2",children:(t=ne.find(n=>n.value===s))==null?void 0:t.label})]})}function es({productResponse:s}){return e.jsxs("div",{className:"",children:[e.jsx(Ye,{productResponse:s}),e.jsx("hr",{}),e.jsx("div",{className:"my-6",children:e.jsx(Qe,{productResponse:s})})]})}const ss={breadcrumb:[{href:V.products.products,name:"Products"},{name:"Edit"}]};function as({productResponse:s}){return console.log("productResponse",s),e.jsxs(e.Fragment,{children:[e.jsx(he,{title:s.title,breadcrumb:ss.breadcrumb,children:e.jsx("div",{className:"mt-4 flex items-center gap-3 lg:mt-0",children:e.jsx(I,{to:V.products.products,className:"w-full lg:w-auto"})})}),e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"grid grid-cols-12 gap-x-6",children:[e.jsxs("div",{className:"col-span-12 lg:col-span-8 xl:col-span-9",children:[e.jsx(Fe,{productResponse:s}),e.jsx(es,{productResponse:s})]}),e.jsxs("div",{className:"col-span-12 lg:col-span-4 xl:col-span-3 hidden lg:block",children:[e.jsx(ns,{productResponse:s}),e.jsx(ts,{productResponse:s}),e.jsx(ls,{productResponse:s})]})]})})]})}const ts=({productResponse:s})=>{const t=[{label:"Apple ðŸŽ",value:"apple"},{label:"Banana ðŸŒ",value:"banana"},{label:"Cherry ðŸ’",value:"cherry"}],[n,l]=g.useState([]);return e.jsxs(a.Box,{className:"rounded-[10px] border border-muted p-4 mt-5",children:[e.jsx(a.Title,{as:"h3",className:"text-[#848BD4] font-medium xl:text-lg",children:"Billion Grid Collection"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(a.MultiSelect,{value:n,options:t,label:"Multi Select",onChange:l})})]})},ns=({productResponse:s})=>{const{status:t}=s;return e.jsxs(a.Box,{className:"rounded-[10px] border border-muted p-4",children:[e.jsxs("div",{children:[e.jsx(a.Title,{as:"h3",className:"text-[#848BD4] font-medium xl:text-lg",children:"Product Status"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.Badge,{renderAsDot:!0,color:t.toLowerCase()==="active"?"success":"danger",size:"md"}),e.jsx(a.Text,{children:s.status})]})]}),e.jsxs("div",{children:[e.jsx(a.Title,{as:"h3",className:"text-[#848BD4] font-medium xl:text-lg",children:"Online Store Status"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a.Badge,{renderAsDot:!0,color:t.toLowerCase()==="active"?"success":"danger",size:"md"}),e.jsx(a.Text,{children:"Published"})]})]})]})},ls=({productResponse:s})=>{const{createdAt:t,updatedAt:n}=s;return e.jsxs(a.Box,{className:"rounded-[10px] border border-muted p-4 mt-5",children:[e.jsxs("div",{children:[e.jsx(a.Title,{as:"h3",className:"text-[#848BD4] font-medium xl:text-lg",children:"Last Updated"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(a.Text,{className:"text-sm",children:F(n)})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(a.Title,{as:"h3",className:"text-[#848BD4] font-medium xl:text-lg",children:"Created At"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(a.Text,{className:"text-sm",children:F(t)})})]})]})},ws=()=>{const{apiKey:s,product:t}=Ce(),[,n]=b(M),[,l]=b(J);return g.useEffect(()=>{t&&(n(t),l(t.shop))},[t,n]),ye()?t?e.jsx(as,{productResponse:t}):e.jsx("div",{children:"Product not found"}):null};export{ws as default};
