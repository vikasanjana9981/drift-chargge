{"version":3,"file":"merchant.home-Cvs5Jf_T.js","sources":["../../../app/routes/merchant.home.tsx"],"sourcesContent":["import { LoaderFunctionArgs, redirect } from '@remix-run/node';\r\nimport { useLoaderData } from '@remix-run/react';\r\nimport { AppProvider } from '@shopify/shopify-app-remix/react';\r\nimport { getAuthCookie, mergeQueryParams } from 'app/packages/utils/cookieAuth';\r\nimport { authenticate } from 'app/shopify.server';\r\n\r\nexport const loader = async ({ request }: LoaderFunctionArgs) => {\r\n  const cookieHeader = request.headers.get(\"Cookie\");\r\n  const authData = await getAuthCookie(cookieHeader);\r\n  if (!authData) {\r\n    throw redirect(\"/auth/login\");\r\n  }\r\n\r\n  // Create a new request with merged query parameters\r\n  const updatedRequest = mergeQueryParams(request, authData.query);\r\n  await authenticate.admin(updatedRequest);\r\n\r\n  return { apiKey: process.env.SHOPIFY_API_KEY || \"\" };\r\n};\r\n\r\nconst Home = () => {\r\n  const { apiKey } = useLoaderData<typeof loader>();\r\n  return (\r\n    <h1>Home</h1>\r\n  )\r\n}\r\n\r\nexport default Home"],"names":["Home","useLoaderData","jsx","children"],"mappings":"qFAoBMA,MAAAA,EAAOA,KACQC,EAA6B,EAE9CC,EAAAA,IAAC,MAAGC,SAAI,MAAA,CAAA"}